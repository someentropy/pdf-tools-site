{% extends "layout.html" %}
{% block title %}Compress PDF Files Online - Reduce PDF Size Free | FreePDFTools{% endblock %}
{% block description %}Compress PDF files online for free in seconds. Reduce PDF size by up to 70% while maintaining quality. No signup, no watermark, instant download.{% endblock %}
{% block keywords %}compress PDF, reduce PDF size, PDF compression tool, make PDF smaller, optimize PDF{% endblock %}
{% block og_title %}Compress PDF Files Online for Free | FreePDFTools{% endblock %}
{% block og_description %}Reduce PDF file size online for free while maintaining quality. Easy to use PDF compression with no signup required.{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 40px auto; padding: 24px; background-color: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <h1 style="font-size: 1.8rem; font-weight: bold; color: #3182ce; margin-bottom: 16px;">Compress PDF Files Online for Free</h1>
  
  <!-- File size limit notice -->
  <div style="background-color: #ebf8ff; border-left: 4px solid #3182ce; padding: 12px; margin-bottom: 20px; border-radius: 4px;">
    <p style="margin: 0; color: #2c5282; font-size: 0.9rem;">
      <strong>Note:</strong> Maximum file size is 20 MB.
    </p>
  </div>
  
  <!-- Error message from server -->
  {% if error %}
  <div style="background-color: #fff5f5; border-left: 4px solid #e53e3e; padding: 12px; margin-bottom: 20px; border-radius: 4px;">
    <p style="margin: 0; color: #c53030; font-size: 0.9rem;">
      <strong>Error:</strong> {{ error }}
    </p>
  </div>
  {% endif %}
  
  <form method="POST" enctype="multipart/form-data" onsubmit="return validateFileSize()" style="margin-top: 24px;">
    <div style="margin-bottom: 20px;">
      <label style="display: block; font-size: 0.9rem; font-weight: 500; color: #4a5568; margin-bottom: 8px;">Select PDF to Compress</label>
      <input type="file" name="file" id="pdfFile" required style="display: block; width: 100%; padding: 8px 12px; border: 1px solid #e2e8f0; border-radius: 6px;" accept=".pdf" />
      <div id="fileSizeError" style="color: #e53e3e; font-size: 0.8rem; margin-top: 6px; display: none;">
        File size exceeds the maximum limit of 20 MB. Please select a smaller file.
      </div>
    </div>

    <div style="margin-bottom: 24px;">
      <label for="compression" style="display: block; font-size: 0.9rem; font-weight: 500; color: #4a5568; margin-bottom: 4px;">Compression Strength</label>
      <small style="display: block; color: #718096; margin-bottom: 8px;">5 = Smallest file, 1 = Best quality</small>
      <div style="display: flex; align-items: center; gap: 12px;">
        <input type="range" id="compression" name="compression" min="1" max="5" value="3" oninput="updateLabel(this.value)" style="flex-grow: 1;" />
        <span id="compressionLabel" style="font-family: monospace; font-size: 0.9rem;">/ebook</span>
      </div>
    </div>

    <button type="submit" id="submitButton" style="width: 100%; background-color: #3182ce; color: white; font-weight: 500; padding: 10px; border: none; border-radius: 6px; cursor: pointer;">Compress PDF</button>
  </form>

  <div id="compressionSummary" style="margin-top: 24px; font-size: 0.9rem; color: #4a5568;">
    {% if compression_percent %}
    <h3 style="font-size: 1.2rem; font-weight: 600; color: #38a169; margin-bottom: 8px;">Compression Summary:</h3>
    <ul style="list-style-type: disc; padding-left: 20px;">
      <li>Original size: {{ original_size }} KB</li>
      <li>Compressed size: {{ compressed_size }} KB</li>
      <li>Reduced by: {{ compression_percent|round(1) }}%</li>
    </ul>
    {% endif %}
  </div>

  <div id="loadingMessage" style="color: #3182ce; margin-top: 24px; display: none;">
    <p>Compressing PDF... Please wait</p>
  </div>
  
  <!-- Buy Me a Coffee widget -->
  <div style="margin-top: 30px; text-align: center; padding: 16px; border-top: 1px solid #e2e8f0;">
    <p style="margin-bottom: 12px; font-size: 0.95rem; color: #4a5568;">
      Find this tool helpful? Support FreePDFTools to keep it free and ad-free.
    </p>
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="carbon808" data-color="#FFDD00" data-emoji="" data-font="Cookie" data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff"></script>
  </div>
</div>

<section style="max-width: 800px; margin: 60px auto 20px; padding: 0 20px;">
  <h2 style="font-size: 1.5rem; color: #2d3748; margin-bottom: 20px;">How to Compress PDF Files Online</h2>
  
  <div style="color: #4a5568; line-height: 1.6;">
    <p>Compressing PDF files is essential when you need to share documents via email, upload them to websites, or save storage space. FreePDFTools's free compression tool helps you reduce PDF file size while maintaining document quality.</p>
    
    <h3 style="font-size: 1.2rem; color: #2d3748; margin: 20px 0 10px;">Why Compress PDF Files?</h3>
    <ul style="padding-left: 20px; margin-bottom: 20px;">
      <li>Email attachments often have size limits</li>
      <li>Websites typically restrict upload sizes</li>
      <li>Smaller files load faster on mobile devices</li>
      <li>Save storage space on your device</li>
      <li>Faster document sharing and downloads</li>
    </ul>
    
    <h3 style="font-size: 1.2rem; color: #2d3748; margin: 20px 0 10px;">How Our PDF Compression Works</h3>
    <p>Our compression tool uses advanced algorithms to reduce file size while preserving document quality. The compression level slider lets you choose between maximum quality and maximum compression based on your needs:</p>
    <ol style="padding-left: 20px; margin-bottom: 20px;">
      <li><strong>Screen</strong> (highest compression): Best for PDFs that will be viewed on screens only</li>
      <li><strong>eBook</strong>: Good balance for documents to be read on e-readers</li>
      <li><strong>Printer</strong>: Balanced compression for documents that may be printed</li>
      <li><strong>Prepress</strong>: Light compression for high-quality printing</li>
      <li><strong>Default</strong> (lowest compression): Minimal changes to preserve maximum quality</li>
    </ol>
    
    <h3 style="font-size: 1.2rem; color: #2d3748; margin: 20px 0 10px;">Frequently Asked Questions</h3>
    <dl>
      <dt style="font-weight: 600; margin-top: 15px;">Is my data secure when using FreePDFTools?</dt>
      <dd>Yes, we process all files securely and delete them automatically after processing. Your files are never shared or stored permanently.</dd>
      
      <dt style="font-weight: 600; margin-top: 15px;">Will compression affect my PDF quality?</dt>
      <dd>Our tool is designed to maintain an optimal balance between file size and quality. The compression level slider allows you to control this balance according to your needs.</dd>
      
      <dt style="font-weight: 600; margin-top: 15px;">What's the maximum file size I can compress?</dt>
      <dd>Our online tool handles files up to 20MB.</dd>
    </dl>
  </div>
</section>

{% if download_link %}
<script>
  window.onload = function () {
    const link = document.createElement("a");
    link.href = "{{ download_link }}";
    link.download = "";
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  };
</script>
{% endif %}

<script>
// Modified validateFileSize function - only showing the message when submitting
function validateFileSize() {
  const fileInput = document.getElementById('pdfFile');
  const file = fileInput.files[0];
  const maxSizeBytes = 20 * 1024 * 1024; // 20 MB in bytes
  
  if (file && file.size > maxSizeBytes) {
    document.getElementById('fileSizeError').style.display = 'block';
    return false; // Prevent form submission
  } else {
    document.getElementById('fileSizeError').style.display = 'none';
    // Only start the progress when the form is actually submitted
    startProgress();
    return true; // Allow form submission
  }
}

// Modified file input change event handler
document.querySelector('input[name="file"]').addEventListener('change', function () {
  const summary = document.getElementById("compressionSummary");
  if (summary) summary.innerHTML = "";
  const loading = document.getElementById("loadingMessage");
  if (loading) loading.style.display = "none";
  
  // Only check file size here, don't show the loading message
  const fileInput = document.getElementById('pdfFile');
  const file = fileInput.files[0];
  const maxSizeBytes = 20 * 1024 * 1024; // 20 MB in bytes
  
  if (file && file.size > maxSizeBytes) {
    document.getElementById('fileSizeError').style.display = 'block';
  } else {
    document.getElementById('fileSizeError').style.display = 'none';
  }
});

function updateLabel(val) {
  const labels = {
    5: "/screen",
    4: "/ebook",
    3: "/printer",
    2: "/prepress",
    1: "/default"
  };
  document.getElementById("compressionLabel").innerText = labels[val];
}

function startProgress() {
  document.getElementById("loadingMessage").style.display = "block";
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "FreePDFTools Compress",
  "applicationCategory": "Utility",
  "operatingSystem": "Web Browser",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "description": "Free online tool to compress PDF files while maintaining quality. No signup required."
}
</script>
{% include "_social_share.html" %}

{% endblock %}