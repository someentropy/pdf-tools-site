<!-- merge.html -->
{% extends "layout.html" %}
{% block title %}Merge PDFs | CarbonPDF{% endblock %}
{% block content %}
<div class="bg-white rounded-2xl shadow-md p-6 mt-10">
  <h1 class="text-2xl font-bold text-blue-600 mb-4">Merge PDFs</h1>
  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    <p class="text-sm text-gray-600">Select up to 5 PDFs to merge in order:</p>

    {% for i in range(1, 6) %}
    <div>
      <label class="block text-sm font-medium text-gray-700">File {{ i }}:</label>
      <input type="file" name="file{{ i }}" id="file{{ i }}" class="mt-1 block w-full border border-gray-300 rounded px-3 py-2">
      <small id="file{{ i }}Label" class="text-gray-500"></small>
    </div>
    {% endfor %}

    <div class="flex space-x-3">
      <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-md">Merge</button>
      <button type="button" onclick="clearForm()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 rounded-md">Clear</button>
    </div>
  </form>

  <div id="loadingMessage" class="text-blue-600 mt-6" style="display: none;">
    <p>Merging PDFs... Please wait</p>
  </div>
</div>

<script>
  for (let i = 1; i <= 5; i++) {
    const input = document.getElementById("file" + i);
    const label = document.getElementById("file" + i + "Label");

    input.addEventListener("change", function () {
      if (this.files.length > 0) {
        label.innerText = "Selected: " + this.files[0].name;
      } else {
        label.innerText = "";
      }
    });
  }

  function clearForm() {
    for (let i = 1; i <= 5; i++) {
      const input = document.getElementById("file" + i);
      const label = document.getElementById("file" + i + "Label");
      input.value = "";
      label.innerText = "";
    }

    const loading = document.getElementById("loadingMessage");
    if (loading) loading.style.display = "none";
  }
</script>
{% endblock %}